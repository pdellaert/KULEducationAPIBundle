{% extends "DellaertKULEducationXMLBundle::layout.html.twig" %}

{% block content %}
	<script type="text/javascript">
		$(document).ready(function(){
			$('#faculties').hide();
			$('#levels').hide();
			$('#studies').hide();
			$('#programs').hide();
			$('#stages').hide();

			$.getJSON('{{ path('dellaert_kul_education_xml_list_faculties_by_id_title', {'_locale': app.request.locale}) }}', function(data){
				var len = data.length;
				if( len == 0 ) {
					var html = '<option value="-1">{% trans %}no.faculty{% endtrans %}</option>'
				} else {
					var html = '<option value="-1">{% trans %}choose.faculty{% endtrans %}</option>';
				}
				for( var i=0; i < len; i++ ){
					html += '<option value="' + data[i].id + '">' + data[i].title + '</option>';
				}
				$('#faculties').html(html);
			});
			$('#faculties').show();

			$('#faculties').change(function(){
				$('#stages').hide();
				var html = '<option value="-1">{% trans %}choose.stage{% endtrans %}</option>';
				$('#stages').html(html);
				$('#programs').hide();
				var html = '<option value="-1">{% trans %}choose.program{% endtrans %}</option>';
				$('#programs').html(html);
				$('#studies').hide();
				var html = '<option value="-1">{% trans %}choose.study{% endtrans %}</option>';
				$('#studies').html(html);

				if( $(this).val() != -1 ) {
					$.getJSON('{{ path('dellaert_kul_education_xml_list_levels_by_id_title_noid', {'_locale': app.request.locale}) }}/'+$(this).val(), function(data) {
						var len = data.length;
						if( len == 0 ) {
							var html = '<option value="-1">{% trans %}no.level{% endtrans %}</option>'
						} else {
							var html = '<option value="-1">{% trans %}choose.level{% endtrans %}</option>';
						}
						for( var i=0; i < len; i++ ){
							html += '<option value="' + data[i].id + '">' + data[i].title + '</option>';
						}
						$('#levels').html(html);
					});
					$('#levels').show();
				} else {
					$('#levels').hide();
					var html = '<option value="-1">{% trans %}choose.level{% endtrans %}</option>';
					$('#levels').html(html);
				}
			});

			$('#levels').change(function(){
				$('#stages').hide();
				var html = '<option value="-1">{% trans %}choose.stage{% endtrans %}</option>';
				$('#stages').html(html);
				$('#programs').hide();
				var html = '<option value="-1">{% trans %}choose.program{% endtrans %}</option>';
				$('#programs').html(html);

				if( $(this).val() != -1 ) {
					$.getJSON('{{ path('dellaert_kul_education_xml_list_studies_by_id_title_noid', {'_locale': app.request.locale}) }}/'+$('#faculties').val()+'/'+$(this).val(), function(data) {
						var len = data.length;
						if( len == 0 ) {
							var html = '<option value="-1">{% trans %}no.study{% endtrans %}</option>'
						} else {
							var html = '<option value="-1">{% trans %}choose.study{% endtrans %}</option>';
						}
						for( var i=0; i < len; i++ ){
							html += '<option value="' + data[i].id + '">' + data[i].title + '</option>';
						}
						$('#studies').html(html);
					});
					$('#studies').show();
				} else {
					$('#studies').hide();
					var html = '<option value="-1">{% trans %}choose.study{% endtrans %}</option>';
					$('#studies').html(html);
				}
			});

			$('#studies').change(function(){
				$('#stages').hide();
				var html = '<option value="-1">{% trans %}choose.stage{% endtrans %}</option>';
				$('#stages').html(html);

				if( $(this).val() != -1 ) {
					$.getJSON('{{ path('dellaert_kul_education_xml_list_programs_by_id_title_noid', {'_locale': app.request.locale}) }}/'+$(this).val(), function(data) {
						var len = data.length;
						if( len == 0 ) {
							var html = '<option value="-1">{% trans %}no.program{% endtrans %}</option>'
						} else {
							var html = '<option value="-1">{% trans %}choose.program{% endtrans %}</option>';
						}
						for( var i=0; i < len; i++ ){
							html += '<option value="' + data[i].id + '">' + data[i].title + ' (' + data[i].studypoints + ' {% trans %}studypoints{% endtrans %})</option>';
						}
						$('#programs').html(html);
					});
					$('#programs').show();
				} else {
					$('#programs').hide();
					var html = '<option value="-1">{% trans %}choose.program{% endtrans %}</option>';
					$('#programs').html(html);
				}
			});

			$('#programs').change(function(){				
				if( $(this).val() != -1 ) {
					$.getJSON('{{ path('dellaert_kul_education_xml_list_stages_by_id_title_noid', {'_locale': app.request.locale}) }}/'+$(this).val(), function(data) {
						var len = data.length;
						if( len == 0 ) {
							var html = '<option value="-1">{% trans %}no.stage{% endtrans %}</option>'
						} else {
							var html = '<option value="-1">{% trans %}choose.stage{% endtrans %}</option>';
						}
						for( var i=0; i < len; i++ ){
							html += '<option value="' + data[i].id + '">{% trans %}stage{% endtrans %} ' + data[i].id + '</option>';
						}
						$('#stages').html(html);
					});
					$('#stages').show();
				} else {
					$('#stages').hide();
					var html = '<option value="-1">{% trans %}choose.stage{% endtrans %}</option>';
					$('#stages').html(html);
				}
			});
		});
	</script>

	<form method="POST">
		<select name="faculty" id="faculties" size="1">
			<option value="-1">{% trans %}choose.faculty{% endtrans %}</option>
		</select>
		<br />
		<select name="level" id="levels" size="1">
			<option value="-1">{% trans %}choose.level{% endtrans %}</option>
		</select>
		<br />
		<select name="study" id="studies" size="1">
			<option value="-1">{% trans %}choose.study{% endtrans %}</option>
		</select>
		<br />
		<select name="program" id="programs" size="1">
			<option value="-1">{% trans %}choose.program{% endtrans %}</option>
		</select>
		<br />
		<select name="stage" id="stages" size="1">
			<option value="-1">{% trans %}choose.stage{% endtrans %}</option>
		</select>
	</form>
{% endblock %}
